<!-- src/templates/voucher_instances.html -->
{% extends "base.html" %}
{% block title %}Voucher Instances{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Voucher Instances</h2>
  <div>
    <a href="/voucher_types" class="btn btn-outline-secondary">Manage Voucher Types</a>
    <a href="/vouchers/create_custom" class="btn btn-primary">Create New Voucher</a>
  </div>
</div>

{% if voucher_instances %}
<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead class="table-dark">
      <tr>
        <th>Voucher Number</th>
        <th>Voucher Type</th>
        <th>Category</th>
        <th>Module</th>
        <th>Created At</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for voucher in voucher_instances %}
      <tr>
        <td>
          <a href="/voucher_instances/{{ voucher.id }}" class="text-decoration-none fw-bold">
            {{ voucher.voucher_number }}
          </a>
        </td>
        <td>
          {% if voucher.voucher_type %}
            {{ voucher.voucher_type.name }}
          {% else %}
            -
          {% endif %}
        </td>
        <td>
          {% if voucher.voucher_type %}
            <span class="badge bg-secondary">{{ voucher.voucher_type.category.title() }}</span>
          {% else %}
            -
          {% endif %}
        </td>
        <td>{{ voucher.module_name }}</td>
        <td>{{ voucher.created_at.strftime('%Y-%m-%d %H:%M') if voucher.created_at else 'N/A' }}</td>
        <td>
          <a href="/voucher_instances/{{ voucher.id }}" class="btn btn-sm btn-outline-primary">View</a>
          {% if voucher.voucher_type %}
          <a href="/vouchers/create_custom?module={{ voucher.voucher_type.module_name }}" class="btn btn-sm btn-outline-success" title="Create similar voucher">+ New</a>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="alert alert-info">
  <h5>No voucher instances found</h5>
  <p>There are no voucher instances in the system yet.</p>
  <a href="/vouchers/create_custom" class="btn btn-primary">Create Your First Voucher</a>
</div>
{% endif %}
{% endblock %}